import{j as r,B as f,r as l,G as m}from"./app-D4LeRcz-.js";import{L as d}from"./Label-B4Jc12RG.js";import{u as w,C as e}from"./Combobox-DnGWXCU-.js";import{I as c}from"./Input-DgDk-0wJ.js";import{P as x}from"./PillsInput-DfF2hQDi.js";import{P as D}from"./Pill-DFbPvVIq.js";import{a as b}from"./CheckIcon-D7wk-t0p.js";import"./ColorSwatch-CG_Yzh_s.js";import"./Text-CzrlvvXy.js";import"./Popover-DklDwA2e.js";import"./DirectionProvider-BfCW8nl5.js";import"./use-floating-auto-update-CkIo9cus.js";import"./use-uncontrolled-D4udaf1u.js";import"./create-optional-context-DIHD1p9X.js";import"./InputBase-UfetLwmU.js";function T({items:p,selected:n,onChange:a,...u}){const s=w({onDropdownClose:()=>s.resetSelectedOption(),onDropdownOpen:()=>s.updateSelectedOptionIndex("active")}),h=o=>a(n.includes(o)?n.filter(i=>i!==o):[...n,o]),t=o=>a(n.filter(i=>i!==o));return r.jsxs(f,{...u,children:[r.jsx(c.Label,{children:"Labels"}),r.jsxs(e,{store:s,onOptionSubmit:h,withinPortal:!1,disabled:!can("edit task"),children:[r.jsx(e.DropdownTarget,{children:r.jsx(x,{pointer:!0,onClick:()=>s.toggleDropdown(),children:r.jsxs(D.Group,{style:{rowGap:l(3),columnGap:l(12)},children:[n.length>0?n.map(o=>{const i=p.find(j=>j.id===o);return r.jsx(d,{name:i.name,color:i.color,size:11,onRemove:()=>t(i)},i.id)}):r.jsx(c.Placeholder,{children:"Select labels"}),r.jsx(e.EventsTarget,{children:r.jsx(x.Field,{type:"hidden",onBlur:()=>s.closeDropdown(),onKeyDown:o=>{o.key==="Backspace"&&(o.preventDefault(),t(n[n.length-1]))}})})]})})}),r.jsx(e.Dropdown,{children:r.jsx(e.Options,{children:p.map(o=>r.jsx(e.Option,{value:o.id,active:n.includes(o.id),children:r.jsxs(m,{gap:"sm",children:[n.includes(o.id)?r.jsx(b,{size:12}):null,r.jsx(m,{gap:7,children:r.jsx(d,{name:o.name,color:o.color,size:11,onRemove:()=>t(o)})})]})},o.id))})})]})]})}export{T as default};
